<% if @error_message.blank? %>

	$('#job-plan-row-<%= @job_plan.id %>').replaceWith("<%=j render(partial: "row_job_plan", locals: {job_plan: @job_plan}) %>");
	$('#job-plan-row-<%= @job_plan.id %>').effect("highlight");
	
<% else %>
	
	if($('#job_plan_<%= @job_plan.id %>_name').val() == ''){
		$('#job_plan_<%= @job_plan.id %>_name').parent().addClass('has-error');
	}else{
		$('#job_plan_<%= @job_plan.id %>_name').parent().removeClass('has-error');
	}
	
	if($('#job_plan_<%= @job_plan.id %>_expect').val() == ''){
		$('#job_plan_<%= @job_plan.id %>_expect').parent().addClass('has-error');
	}else{
		$('#job_plan_<%= @job_plan.id %>_expect').parent().removeClass('has-error');
	}
	
	if($('#job_plan_<%= @job_plan.id %>_weight').val() == ''){
		$('#job_plan_<%= @job_plan.id %>_weight').parent().addClass('has-error');
	}else{
		$('#job_plan_<%= @job_plan.id %>_weight').parent().removeClass('has-error');
	}
	
	alert('<%=h @error_message %>\r\n<%= @job_plan.errors.full_messages.join("\\r\\n") %>');
	
<% end %>
