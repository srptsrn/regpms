<% if @error_message.blank? %>

	$('#job-routine-row-<%= @job_routine.id %>').replaceWith("<%=j render(partial: "row_job_routine", locals: {job_routine: @job_routine}) %>");
	$('#job-routine-row-<%= @job_routine.id %>').effect("highlight");
	
<% else %>
	
	if($('#job_routine_<%= @job_routine.id %>_name').val() == ''){
		$('#job_routine_<%= @job_routine.id %>_name').parent().addClass('has-error');
	}else{
		$('#job_routine_<%= @job_routine.id %>_name').parent().removeClass('has-error');
	}
	
	if($('#job_routine_<%= @job_routine.id %>_expect').val() == ''){
		$('#job_routine_<%= @job_routine.id %>_expect').parent().addClass('has-error');
	}else{
		$('#job_routine_<%= @job_routine.id %>_expect').parent().removeClass('has-error');
	}
	
	if($('#job_routine_<%= @job_routine.id %>_weight').val() == ''){
		$('#job_routine_<%= @job_routine.id %>_weight').parent().addClass('has-error');
	}else{
		$('#job_routine_<%= @job_routine.id %>_weight').parent().removeClass('has-error');
	}
	
	alert('<%=h @error_message %>\r\n<%= @job_routine.errors.full_messages.join("\\r\\n") %>');
	
<% end %>
